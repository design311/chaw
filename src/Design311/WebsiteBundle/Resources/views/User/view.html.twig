{% extends 'Design311WebsiteBundle::layout.html.twig' %}

{% block title %}Foodie {{user.displayName}} - {{parent()}}{% endblock %}
{% block description %}{{ user.description|truncate(150) }}{% endblock %}
{% block ogimage %}{{ app.request.uriForPath('/' ~ user.avatar) }}{% endblock %}

{% block bodyclass %}profile-view{% endblock %}

{% block content %}

<div id="map" class="map"></div>

<div class="container content">

	<div class="one-third">
		<img src="{{ user.avatar | apply_filter('avatar_355') }}" alt="Avatar {{user.displayname}}" class="avatar">
	</div>
	<div class="two-third">
		<h1>{{user.displayName}}</h1>
		<p>{{user.description}}</p>

		<ul class="user-social">
			{% if user.website is not null %}
			<li><a href="{{user.website}}" target="_blank"><i class="sprite medium website"></i></a></li>
			{% endif %}
			{% if user.facebook is not null %}
			<li><a href="{{user.facebook}}" target="_blank"><i class="sprite medium facebook"></i></a></li>
			{% endif %}
			{% if user.twitter is not null %}
			<li><a href="{{user.twitter}}" target="_blank"><i class="sprite medium twitter"></i></a></li>
			{% endif %}
			{% if user.googleplus is not null %}
			<li><a href="{{user.googleplus}}" target="_blank"><i class="sprite medium googleplus"></i></a></li>
			{% endif %}
		</ul>
	</div>

	<div class="clear"></div>

	<div class="one-third">

		{% if app.user == user %}
			<p><a href="{{ path('design311website_profile_edit') }}" class="button button-orange">Profiel bewerken</a></p>
		{% endif %}

		<div class="widget">
			<ul>
				<li>Vindt <strong>{{user.likedrecipes|length}}</strong> {{user.likedrecipes|length == 1 ? 'recept' : 'recepten'}} lekker</li>
				<li>Heeft <strong>{{user.dinners|length}}</strong> {{user.dinners|length == 1 ? 'dinner' : 'dinners'}} georganiseerd</li>
				<li>Nam deel aan <strong>{{user.dinnersParticipated|length}}</strong>  {{user.dinnersParticipated|length == 1 ? 'dinner' : 'dinners'}}</li>
			</ul>
		</div>
		<!-- {% if app.user != user %}
		<div class="widget">
			//feedback form
		</div>
		{% endif %}
		<div class="widget">
			//feedback
		</div> -->
	</div>
	{% include 'Design311WebsiteBundle:Shared:recipes-list.html.twig' with {'recipes':user.recipes, 'userprofile': user} %}

		
</div>

{% endblock %}

{% block footer %}
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script>
    	$(function(){
    		var map;

			var userCoords = new google.maps.LatLng({{location.lat}}, {{location.lng}});

			var mapStyle = [
				{
					"stylers": [
						{ "hue": "#ff9100" }
					]
				},{
					"featureType": "poi",
					"stylers": [
						{ "visibility": "off" }
					]
				},{
					"featureType": "road",
					"elementType": "labels.icon",
					"stylers": [
						{ "visibility": "off" }
					]
				},{
					"featureType": "transit",
					"elementType": "labels",
					"stylers": [
						{ "visibility": "off" }
					]
				},{
					"featureType": "water",
					"stylers": [
						{ "visibility": "simplified" }
					]
				},{
					"featureType": "administrative.neighborhood",
					"stylers": [
						{ "visibility": "off" }
					]
				}
			]

			map = new google.maps.Map(document.getElementById('map'), {
				mapTypeId: google.maps.MapTypeId.ROADMAP,
				streetViewControl: false,
				mapTypeControl: false,
				scrollwheel: false,
				zoom:14,
				center:userCoords,
				styles:mapStyle
			});
    	})
    </script>
{% endblock %}